<!-- =============================================================================
     == index.html          DominoM  -  August 18 by DAM Productions             ==
     ============================================================================= -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Dominoes</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div id="lobby-container">
        <div id="logo-container">
            <div id="game-logo">DominoM <span class="by-text">by</span> <span class="producer">DAM Productions</span></div>
        </div>
        
        <!-- Suggestion Box -->
        <div id="suggestion-box-container">
            <button id="toggle-suggestion-btn">💡 Buzón de Sugerencias</button>
            <div id="suggestion-box" class="hidden">
                <h4>🎯 Ayúdanos a Mejorar</h4>
                <textarea id="suggestion-text" placeholder="Comparte tus ideas, sugerencias o reporta problemas..." maxlength="500"></textarea>
                <div id="suggestion-actions">
                    <button id="submit-suggestion-btn">📤 Enviar</button>
                    <button id="cancel-suggestion-btn">❌ Cancelar</button>
                </div>
                <div id="suggestion-status"></div>
            </div>
        </div>
        
        <h2>Crear Su Perfil</h2>
        <button id="show-rules-btn">📖 Domino4 - Reglas del Juego</button>
        <div id="profile-status"></div>
        <div class="avatar-flex-row-wrapper">
            <div class="avatar-flex-row">
                <div id="avatar-selection">
                    <h3>Seleccione Su Avatar</h3>
                    <div id="avatar-grid">
                        <div class="avatar-option" data-avatar="😎">😎</div>
                        <div class="avatar-option" data-avatar="🤠">🤠</div>
                        <div class="avatar-option" data-avatar="🥳">🥳</div>
                        <div class="avatar-option selected" data-avatar="🎯">🎯</div>
                        <div class="avatar-option" data-avatar="🎲">🎲</div>
                        <div class="avatar-option" data-avatar="🎮">🎮</div>
                        <div class="avatar-option" data-avatar="🤩">🤩</div>
                        <div class="avatar-option" data-avatar="😈">😈</div>
                        <div class="avatar-option" data-avatar="⚡">⚡</div>
                        <div class="avatar-option" data-avatar="🔥">🔥</div>
                        <div class="avatar-option" data-avatar="💎">💎</div>
                        <div class="avatar-option" data-avatar="🤖">🤖</div>
                        <div class="avatar-option" data-avatar="🌟">🌟</div>
                        <div class="avatar-option" data-avatar="🏆">🏆</div>
                        <div class="avatar-option" data-avatar="👑">👑</div>
                        <div class="avatar-option" data-avatar="🎊">🎊</div>
                    </div>
                    <div id="custom-avatar-section">
                        <h4>O Suba Su Propia Imagen</h4>
                        <label for="avatar-upload" class="custom-file-upload">
                            📁 Seleccionar Archivo
                        </label>
                        <input type="file" id="avatar-upload" accept="image/*" title="Suba su avatar personalizado">
                        <div id="custom-avatar-preview"></div>
                    </div>
                </div>
            </div>
            <div id="available-rooms"></div>
        </div>
        <input type="text" id="name-input" placeholder="Su Nombre o Iniciales" maxlength="9">
        <div class="flex-row">
            <input type="text" id="room-input" placeholder="Sala nombre(opcional)">
            <label for="target-score" class="puntaje-label">Puntaje:</label>
            <select id="target-score" class="puntaje-select">
                <option value="70" selected>70</option>
                <option value="100">100</option>
                <option value="50">50</option>
                <option value="30">30</option>
            </select>
        </div>
        <div id="profile-actions">
            <button id="set-name-btn">Entrar al Juego</button>
            <button id="clear-profile-btn" type="button">Borrar Perfil Guardado</button>
        </div>
        <!-- Game Rules Modal -->
        <!-- Game Rules Modal moved to end of body -->
    </div>
    <div id="canvas-container"></div>
    <div id="game-ui">
        <div class="game-ui-top-row">
            <div class="game-ui-main">
                <div class="team-room-row">
                    <div id="team-info"></div>

                </div>
                <div id="player-display-bottom" class="player-display"></div>
                <div id="player-display-left" class="player-display vertical-layout"></div>
                <div id="player-display-top" class="player-display"></div>
                <div id="player-display-right" class="player-display vertical-layout"></div>
                <div id="scoreboard"></div>
                <div id="matches-won-container"></div>
                <div id="restart-game-container">
                    <button id="restart-game-btn">🔄 Reiniciar Juego</button>
                </div>
                <div id="message-display"></div>
                <div id="game-buttons">
                    <button id="playLeftBtn">Izquierda</button>
                    <button id="playRightBtn">Derecha</button>
                    <button id="passBtn">Paso</button>
                </div>
                <div id="new-round-container"> 
                    <div id="round-over-message"></div>
                    <button id="newRoundBtn">Empezar Mano Nueva</button>
                </div>
                <div id="chat-container">
                    <div id="chat-messages"></div>
                    <form id="chat-input-form">
                        <input type="text" id="chat-input" placeholder="Type a message..." autocomplete="off">
                        <button type="submit">Send</button>
                        <button id="voice-chat-btn" type="button">🎤Presione y hable
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<button onclick="window.location.href='extras.html'" class="extras-button">📊 Info</button>
</div>
    <script src="/socket.io/socket.io.js"></script>
    <!-- Game Rules Modal moved here for visibility -->
    <div id="rules-modal">
        <div id="rules-modal-content">
            <button id="close-rules-btn">✖</button>
            <h2>Domino4 - Reglas del Juego</h2>
            <ol>
                <li>El juego es para 4 jugadores en equipos de 2.</li>
                <li>El juego empieza cuando los 4 jugadores esten inscritos</li>
                <li>El juego se encarga de rotar las parejas despues de cada match</li>
                <li>Cada jugador recibe 7 fichas de dominó.</li>
                <li>El jugador con el doble 6 inicia la partida.</li>
                <li>Los turnos son en sentido contra del reloj.</li>
                <li>Debe colocar una ficha que coincida con los extremos del tablero.</li>
                <li>Si no puede jugar, debe pasar su turno.</li>
                <li>Gana la mano el primer equipo en quedarse sin fichas, o el equipo con menos puntos si el juego se cierra.</li>
                <li>Si hay cierre y empate en puntos, nadie gana y sale el que tenga el doble 6 en la proxima mano</li>
                <li>El primer equipo en alcanzar el puntaje (70) objetivo gana el juego, este valor se puede cambiar al registrarse.</li>
                <li>Usted puede crear su propio salon de juego o unirse a uno existente.</li>
            </ol>
                <p>Consulte las reglas completas con el organizador o en línea.</p>
        </div>
    </div>
    <script>



// index.js — after updating tables
localStorage.setItem('gamesWonHTML', document.getElementById('games-won-table').innerHTML);
localStorage.setItem('pointsHTML', document.getElementById('points-table').innerHTML);


    // Show/hide rules modal logic
    document.addEventListener('DOMContentLoaded', function() {
        var showBtn = document.getElementById('show-rules-btn');
        var modal = document.getElementById('rules-modal');
        var closeBtn = document.getElementById('close-rules-btn');
        var lobby = document.getElementById('lobby-container');
        if (showBtn && modal && closeBtn && lobby) {
            showBtn.onclick = function() {
                modal.classList.add('show');
                lobby.classList.add('modal-open');
            };
            closeBtn.onclick = function() {
                modal.classList.remove('show');
                lobby.classList.remove('modal-open');
            };
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.classList.remove('show');
                    lobby.classList.remove('modal-open');
                }
            };
        }
    });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js"></script>
 
    <script src="/client.js"></script>

</body>
</html>
